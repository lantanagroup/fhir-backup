"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
exports.__esModule = true;
exports.Transfer = void 0;
var request = require("request");
var Transfer = (function () {
    function Transfer() {
        this.targetFhirBase = 'https://hapi4.lantanagroup.com/fhir';
        this.sourceFhirBase = 'http://zeus:8080/hapi-fhir-jpaserver-r4/baseR4';
    }
    Transfer.prototype.getResource = function (fhirBase, resourceType, id) {
        return __awaiter(this, void 0, void 0, function () {
            var url;
            return __generator(this, function (_a) {
                url = fhirBase + (fhirBase.endsWith('/') ? '' : '/') + resourceType + '/' + id;
                return [2, new Promise(function (resolve, reject) {
                        request(url, { json: true }, function (err, response, body) {
                            if (err) {
                                reject(err);
                            }
                            else {
                                resolve(body);
                            }
                        });
                    })];
            });
        });
    };
    Transfer.prototype.updateResource = function (fhirBase, resource) {
        return __awaiter(this, void 0, void 0, function () {
            var url;
            return __generator(this, function (_a) {
                url = fhirBase + (fhirBase.endsWith('/') ? '' : '/') + resource.resourceType + '/' + resource.id;
                return [2, new Promise(function (resolve, reject) {
                        request({ url: url, method: 'PUT', body: resource, json: true }, function (err, response, body) {
                            if (err) {
                                reject(err);
                            }
                            else {
                                resolve(body);
                            }
                        });
                    })];
            });
        });
    };
    Transfer.prototype.execute = function () {
        return __awaiter(this, void 0, void 0, function () {
            var list, _i, list_1, ref, refSplit, ex_1, resource, ex_2, ex_3;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        list = ['AllergyIntolerance/example', 'AllergyIntolerance/allergy-intolerance', 'Binary/235', 'Bundle/delete-success-example4', 'Bundle/read-error-example', 'Bundle/read-success-example', 'Bundle/read-success-example2', 'Bundle/read-success-example3', 'Bundle/read-success-example4', 'Bundle/read-success-example5', 'Bundle/read-success-example6', 'Bundle/read-success-example7', 'Bundle/update-error-example2', 'Bundle/ecr-bundle-knowledge-distribution', 'Bundle/diagnosticreport-cgexample', 'Bundle/diagnosticreport-pgxexample', 'Bundle/ecr-bundle-message-zika', 'Bundle/eicr-bundle-zika', 'Bundle/cdex-example-searchset', 'Bundle/cdex-example-transaction', 'Bundle/eicr-document-bundle-zika', 'Bundle/bundle-ecr-knowledge-distribution', 'Bundle/bundle-eicr-document-zika', 'Bundle/bundle-ecr-message-zika', 'CapabilityStatement/eltss-client', 'CapabilityStatement/eltss-server', 'CapabilityStatement/ah-server', 'CapabilityStatement/client', 'CapabilityStatement/server', 'CapabilityStatement/capabilitystatement-ecr-server', 'CapabilityStatement/capabilitystatement-ecr-client', 'CapabilityStatement/cdex-capabilitystatement-server', 'CapabilityStatement/cdex-capabilitystatement-client', 'CapabilityStatement/us-core-server', 'CapabilityStatement/Davinci-drug-formulary', 'CapabilityStatement/maxmd-cdex-capabilitystatement-client', 'CapabilityStatement/maxmd-cdex-capabilitystatement-server', 'CapabilityStatement/1465', 'CarePlan/colonoscopy', 'CareTeam/example', 'Claim/cdex-example-claim', 'CodeSystem/careplan-category', 'CodeSystem/condition-category', 'CodeSystem/genetic-coordinate-system', 'CodeSystem/sequoia-codes', 'CodeSystem/usdrugformulary-PharmacyTypeCS', 'CodeSystem/usdrugformulary-CopayOptionCS', 'CodeSystem/usdrugformulary-CoinsuranceOptionCS', 'CodeSystem/usdrugformulary-DrugTierCS', 'CodeSystem/codesystem-oes', 'CodeSystem/2.16.840.1.113883.6.277', 'CodeSystem/2.16.840.1.113883.6.259', 'CodeSystem/claiminformationcategory', 'CodeSystem/CARIN-BB-Claim-Type', 'CodeSystem/CARIN-BB-Related-Claim-Relationship', 'CodeSystem/CARIN-BB-Claim-CareTeam-Role', 'CodeSystem/CARIN-BB-Claim-Information-Category', 'CodeSystem/adjudicationCategory', 'CodeSystem/CARIN-BB-Adjudication-Category', 'CodeSystem/CARIN-BB-Network-Contracting-Status', 'Communication/cdex-example-unsolicited-attachment', 'Communication/cdex-example-solicited-attachment', 'Communication/cdex-example-resource-request-response', 'Communication/rr-communication-single-single', 'Communication/communication-rr-single-single', 'Communication/communication-rr-single-single-html-validation-output', 'Communication/cdex-example-unsolicited-resource', 'CommunicationRequest/cdex-example-attachment-request', 'CommunicationRequest/cdex-example-resource-request', 'Composition/PhCP-Composition-Example', 'Composition/CCDA-on-FHIR-Care-Plan-Example', 'Composition/CCDA-on-FHIR-Consultation-Note-Example', 'Composition/CCDA-on-FHIR-Continuity-of-Care-Document-Example', 'Composition/CCDA-on-FHIR-Diagnostic-Imaging-Report-Example', 'Composition/CCDA-on-FHIR-Discharge-Summary-Example', 'Composition/CCDA-on-FHIR-History-and-Physical-Example', 'Composition/CCDA-on-FHIR-Operative-Note-Example', 'Composition/CCDA-on-FHIR-Procedure-Note-Example', 'Composition/CCDA-on-FHIR-Progress-Note-Example', 'Composition/CCDA-on-FHIR-Referral-Note-Example', 'Composition/CCDA-on-FHIR-Transfer-Summary-Example', 'Composition/eicr-composition-zika', 'Composition/composition-eicr-zika', 'Composition/composition-eicr-pertussis-zika', 'Condition/cdex-condition-example', 'Condition/condition-problem', 'Condition/eicr-condition-eve-everywoman-pertussis', 'Condition/eicr-condition-eve-everywoman-common-cold', 'Condition/condition-eicr-eve-everywoman-pertussis', 'Condition/condition-eicr-eve-everywoman-common-cold', 'Condition/Condition-eICR-Condition-eICRExample1', 'Condition/Condition-eICR-Condition-eICRExample2', 'Condition/condition-example', 'Coverage/cdex-example-coverage', 'Device/udi-1', 'Device/ecr-device-software-ymca', 'Device/device-ecr-software-ymca', 'Device/hai-authoring-device', 'Device/hai-ltcf-authoring-device', 'DiagnosticReport/cbc', 'DiagnosticReport/metabolic-panel', 'DiagnosticReport/urinalysis', 'DiagnosticReport/diagnosticreport-hla-glstring-r4', 'DocumentReference/episode-summary', 'Encounter/example-1', 'Encounter/cdex-example-encounter', 'Encounter/encounter-1', 'Encounter/eicr-encounter-eve-everywoman-20180401', 'Encounter/eicr-encounter-diagnosis-eve-everywoman-20180401', 'Encounter/924', 'Encounter/encounter-eicr-diagnosis-eve-everywoman-20180401', 'Encounter/encounter-eicr-eve-everywoman-20180401', 'Endpoint/637', 'Endpoint/ecr-endpoint-salem-medical-center', 'Endpoint/ecr-endpoint-ymca', 'Endpoint/endpoint-ecr-salem-medical-center', 'Endpoint/endpoint-ecr-ymca', 'ExplanationOfBenefit/EB3500', 'Goal/goal-1', 'Group/716', 'Group/hai-group-1', 'Group/hai-ltcf-group-1', 'Immunization/imm-1', 'Immunization/immunization', 'Immunization/phcase-pneumo', 'Immunization/immunization-ecr-pneumo', 'ImplementationGuide/davinci-hrex', 'ImplementationGuide/CCDA-on-FHIR-R4', 'ImplementationGuide/davinci-pdex', 'ImplementationGuide/davinci-cdex', 'ImplementationGuide/t301', 'ImplementationGuide/davinci-pas', 'ImplementationGuide/DME-Orders', 'ImplementationGuide/genomics-reporting', 'ImplementationGuide/phcp', 'ImplementationGuide/eltss', 'ImplementationGuide/sphd-r4', 'ImplementationGuide/Afiliado-ig', 'ImplementationGuide/ah-demo-implementation-guide', 'ImplementationGuide/exchange', 'ImplementationGuide/poc-bb-test', 'ImplementationGuide/davinci-pdex-formulary', 'ImplementationGuide/pdex-plan-net', 'ImplementationGuide/mR00Moe1', 'ImplementationGuide/hl7-fhir-us-ecr', 'ImplementationGuide/carin-bb', 'ImplementationGuide/usdrugformulary-0.2.1', 'ImplementationGuide/WEeD5nYk', 'ImplementationGuide/ccda', 'ImplementationGuide/BCpmS72j', 'ImplementationGuide/HAPTkyeo', 'ImplementationGuide/hl7-fhir-us-hai-ltcf', 'ImplementationGuide/davinci-cdex-maxmd', 'ImplementationGuide/LHRIG', 'List/covplanV1002', 'List/covplanV2002', 'List/CoveragePlanV3001', 'List/CoveragePlanV3002', 'List/CoveragePlanV3004', 'Location/hl7east', 'Location/ecr-location-salem-medical-center', 'Location/location-ecr-salem-medical-center', 'Media/hrex2', 'Media/hrex1', 'Media/PullGET', 'Media/PushPOSTandPUT', 'Media/PushUnsolicitednoTask', 'Media/RequestSolicitedwithTaskp2', 'Media/RequestSolicitednoTask', 'Media/RequestSolicitedwithTaskp1', 'Media/PushUnsolicitedwithTask', 'Media/RequestSolicitedwithTask', 'Media/TemplatedCDA', 'Media/ProblemConcernAct', 'Media/CarePlanRelationshipDiagram', 'Media/CarePlanRelationshipDiagramInstantiated', 'Media/phcp-use-case-1', 'Media/phcp-use-case-2', 'Media/phcp-use-case-3', 'Media/phcp-use-case-4', 'Medication/uscore-med1', 'Medication/uscore-med2', 'Medication/formularydrugV2002', 'MedicationKnowledge/formularydrugV1002', 'MedicationKnowledge/FormularyDrugV3001', 'MedicationKnowledge/cmsip9', 'MedicationRequest/uscore-mo1', 'MedicationRequest/uscore-mo2', 'MedicationStatement/uscore-ms1', 'MedicationStatement/uscore-ms2', 'MedicationStatement/medication-statement', 'MedicationStatement/us-core-medicationstatement-eve-everywoman-azithromycin', 'MedicationStatement/medicationstatement-us-core-eve-everywoman-azithromycin', 'MedicationStatement/MedicationStatement-US-Core-MedicationStatement-eICRExample1', 'MessageHeader/ecr-message-header-ehr-requested-eicr', 'MessageHeader/messageheader-ecr-ehr-requested-eicr', 'Observation/blood-glucose', 'Observation/blood-pressure', 'Observation/bmi', 'Observation/bp-data-absent', 'Observation/bun', 'Observation/erythrocytes', 'Observation/head-circumference', 'Observation/heart-rate', 'Observation/height', 'Observation/hemoglobin', 'Observation/length', 'Observation/mchc', 'Observation/neutrophils', 'Observation/oxygen-saturation', 'Observation/respiratory-rate', 'Observation/serum-calcium', 'Observation/serum-chloride', 'Observation/serum-co2', 'Observation/serum-creatinine', 'Observation/serum-potassium', 'Observation/serum-sodium', 'Observation/serum-total-bilirubin', 'Observation/some-day-smoker', 'Observation/temperature', 'Observation/urine-bacteria', 'Observation/urine-bilirubin', 'Observation/urine-cells', 'Observation/urine-clarity', 'Observation/urine-color', 'Observation/urine-epi-cells', 'Observation/urine-glucose', 'Observation/urine-hemoglobin', 'Observation/urine-ketone', 'Observation/urine-leukocyte-esterase', 'Observation/urine-nitrite', 'Observation/urine-ph', 'Observation/urine-protein', 'Observation/urine-rbcs', 'Observation/urine-sediment', 'Observation/urine-wbcs', 'Observation/urobilinogen', 'Observation/usg', 'Observation/vitals-panel', 'Observation/weight', 'Observation/obs-genotype-hla-a-glstring-r4', 'Observation/obs-haplotype-hla-a-1-r4', 'Observation/observation-smoker', 'Observation/observation-vitals-temp', 'Observation/observation-lab-urine', 'Observation/eicr-travel-history-eve-everywoman-201801', 'Observation/eicr-pregnancy-status-eve-everywoman', 'Observation/eicr-occupation-history-eve-everywoman', 'Observation/rr-eicr-processing-status', 'Observation/rr-eicr-processing-status-reason', 'Observation/us-core-observation-results-eve-everywoman-lymphocytes', 'Observation/eicr-travel-history-eve-everywoman-1999', 'Observation/eicr-travel-history-eve-everywoman-201610', 'Observation/observation-rr-eicr-processing-status', 'Observation/observation-travel-history-eve-everywoman-201801', 'Observation/observation-rr-eicr-processing-status-reason', 'Observation/observation-eicr-occupation-history-eve-everywoman', 'Observation/observation-us-core-results-eve-everywoman-lymphocytes', 'Observation/observation-travel-history-eve-everywoman-1999', 'Observation/observation-travel-history-eve-everywoman-201610', 'Observation/observation-eicr-pregnancy-status-eve-everywoman', 'Observation/observation-pregnancy-status-eve-everywoman', 'Observation/Observation-US-Core-ObservationResults-eICRExample1', 'OperationOutcome/create-error-example', 'OperationOutcome/358', 'OperationOutcome/359', 'OperationOutcome/360', 'OperationOutcome/361', 'OperationOutcome/362', 'OperationOutcome/363', 'OperationOutcome/364', 'OperationOutcome/365', 'OperationOutcome/366', 'OperationOutcome/367', 'OperationOutcome/read-success-example', 'OperationOutcome/update-error-example', 'OperationOutcome/update-success-example', 'OperationOutcome/create-success-example2', 'OperationOutcome/delete-error-example', 'OperationOutcome/delete-success-example', 'OperationOutcome/delete-success-example2', 'OperationOutcome/delete-success-example3', 'OperationOutcome/update-error-example3', 'OperationOutcome/update-success-example3', 'OperationOutcome/create-full-example', 'OperationOutcome/create-full-example2', 'OperationOutcome/create-success-example', 'OperationOutcome/update-success-example5', 'OperationOutcome/validate-error-example', 'OperationOutcome/validate-success-example', 'OperationOutcome/delete-success-example4', 'OperationOutcome/read-error-example', 'Organization/acme-lab', 'Organization/saint-luke-w-endpoint', 'Organization/organization-phcp', 'Organization/phcp-organization-example', 'Organization/read-full-example', 'Organization/create-full-example2', 'Organization/update-success-example4', 'Organization/create-full-example', 'Organization/update-error-example4', 'Organization/update-success-example2', 'Organization/cdex-example-clearinghouse', 'Organization/cdex-example-payer', 'Organization/cdex-example-provider', 'Organization/614', 'Organization/ecr-organization-health-authority-west', 'Organization/ecr-organization-salem-medical-center', 'Organization/684', 'Organization/rr-organization-responsible-agency-haw', 'Organization/ecr-organization-acme-labs', 'Organization/ecr-organization-ymca', 'Organization/rr-organization-routing-entity-haw', 'Organization/rr-organization-rules-authoring-agency-haw', 'Organization/organization-ecr-organization-ymca', 'Organization/organization-ecr-acme-labs', 'Organization/organization-ecr-health-authority-west', 'Organization/organization-rr-rules-authoring-agency-haw', 'Organization/organization-rr-routing-entity-haw', 'Organization/organization-rr-responsible-agency-haw', 'Organization/organization-ecr-salem-medical-center', 'Organization/organization-ecr-organization-health-authority-west', 'Organization/example-organization-2', 'Organization/organization-1', 'Organization/organization-2', 'Patient/example', 'Patient/patient-phcp', 'Patient/patient-1', 'Patient/267', 'Patient/pdex-patient', 'Patient/phcp-patient-example', 'Patient/cdex-example-patient', 'Patient/ecr-patient-eve-everywoman', 'Patient/666', 'Patient/667', 'Patient/patient-ecr-eve-everywoman', 'Patient/patient-ecr-everywoman', 'Patient/patient-ecr-patient-eve-everywoman', 'Patient/hai-patient-1', 'Patient/hai-ltcf-resident-1', 'Patient/patient-example', 'PlanDefinition/rr-plan-zika-state-department-of-health', 'PlanDefinition/plandefinition-test', 'PlanDefinition/plandefinition-rr-relevant-reportable-condition', 'Practitioner/t1', 'Practitioner/practitioner-1', 'Practitioner/practitioner-2', 'Practitioner/t200', 'Practitioner/t202', 'Practitioner/t203', 'Practitioner/t204', 'Practitioner/t282', 'Practitioner/t290', 'Practitioner/t291', 'Practitioner/t292', 'Practitioner/t298', 'Practitioner/t302', 'Practitioner/t352', 'Practitioner/practitioner-phcp', 'Practitioner/ejuux5MG', 'Practitioner/QK5Kk8oq', 'Practitioner/3ElM-asf', 'Practitioner/xeUbCjJ1', 'Practitioner/OMPTHQZA', 'Practitioner/s7DIn2HM', 'Practitioner/PlhmYhOd', 'Practitioner/MjkTHAlW', 'Practitioner/phcp-practitioner-example', 'Practitioner/pW8H6w64', 'Practitioner/sYtNhzbt', 'Practitioner/a3XzbkTp', 'Practitioner/1P2wfZOt', 'Practitioner/e7eHq6Hb', 'Practitioner/OrTnwIKo', 'Practitioner/cdex-example-practitioner', 'Practitioner/a3IWnnK3', 'Practitioner/mAAdk8-Q', 'Practitioner/ES6O6wml', 'Practitioner/jcDbBWaz', 'Practitioner/CL7wqcGK', 'Practitioner/2s4Xme0R', 'Practitioner/VM-jaXLl', 'Practitioner/JxsSOoBC', 'Practitioner/LsMXuFWE', 'Practitioner/Kf8mh3cg', 'Practitioner/ccda-practitioner-example', 'Practitioner/i3ekey0o', 'Practitioner/R6YN9e-m', 'Practitioner/668', 'Practitioner/ecr-practitioner-henry-seven', 'Practitioner/KtnQE6xU', 'Practitioner/mTS6lUzM', 'Practitioner/tSD40tKz', 'Practitioner/qDP757iJ', 'Practitioner/LwYQJgqZ', 'Practitioner/IgkBHre4', 'Practitioner/dMG-NXHH', 'Practitioner/practitioner-us-core-henry-seven', 'Practitioner/Winhe3CW', 'Practitioner/example', 'Practitioner/tmVpfZUX', 'Practitioner/0TzkeBUu', 'Practitioner/bBwLCkHJ', 'Practitioner/2qq2BmOL', 'Practitioner/Yiy-i1D7', 'Practitioner/GmO3Y-Ha', 'Practitioner/H9Z1whb6', 'Practitioner/ysr9JTY4', 'Practitioner/LLJ9CHnP', 'PractitionerRole/phcp-practitionerrole-example', 'PractitionerRole/ccda-practitionerrole-example', 'PractitionerRole/ecr-practitionerrole-henry-seven', 'Procedure/rehab', 'Procedure/procedure-rehab', 'Questionnaire/WediNinetyDayChecklist', 'Questionnaire/659', 'Questionnaire/hai-ltcf-questionnaire-mdro-cdi-event', 'Questionnaire/hai-ltcf-questionnaire-mdro-cdi-summary', 'QuestionnaireResponse/hai-ltcf-questionnaireresponse-mdro-cdi-event', 'QuestionnaireResponse/hai-ltcf-questionnaireresponse-mdro-cdi-summary', 'RelatedPerson/related-person-phcp', 'RelatedPerson/phcp-relatedperson-example', 'SearchParameter/us-core-ethnicity', 'SearchParameter/us-core-race', 'ServiceRequest/servicerequest-hla-a-r4', 'ServiceRequest/eicr-servicerequest-zika', 'ServiceRequest/eicr-servicerequest-eve-everywoman-zika', 'ServiceRequest/servicerequest-eicr-eve-everywoman-zika', 'ServiceRequest/servicerequest-eicr-zika', 'Specimen/specimen-hla-r4', 'StructureDefinition/extension-ig-dependency-location', 'StructureDefinition/extension-ig-dependency-name', 'StructureDefinition/extension-ig-dependency-version', 'StructureDefinition/CCDA-on-FHIR-Care-Plan', 'StructureDefinition/CCDA-on-FHIR-Consent', 'StructureDefinition/CCDA-on-FHIR-Consultation-Note', 'StructureDefinition/CCDA-on-FHIR-Continuity-of-Care-Document', 'StructureDefinition/CCDA-on-FHIR-Data-Enterer', 'StructureDefinition/CCDA-on-FHIR-Diagnostic-Imaging-Report', 'StructureDefinition/CCDA-on-FHIR-Discharge-Summary', 'StructureDefinition/CCDA-on-FHIR-History-and-Physical', 'StructureDefinition/CCDA-on-FHIR-Informant', 'StructureDefinition/CCDA-on-FHIR-Information-Recipient', 'StructureDefinition/CCDA-on-FHIR-In-Fulfillment-Of-Order', 'StructureDefinition/CCDA-on-FHIR-Operative-Note', 'StructureDefinition/CCDA-on-FHIR-Participant', 'StructureDefinition/CCDA-on-FHIR-Performer', 'StructureDefinition/CCDA-on-FHIR-Procedure-Note', 'StructureDefinition/CCDA-on-FHIR-Progress-Note', 'StructureDefinition/CCDA-on-FHIR-Referral-Note', 'StructureDefinition/CCDA-on-FHIR-Transfer-Summary', 'StructureDefinition/CCDA-on-FHIR-US-Realm-Header', 'StructureDefinition/CCDA-on-FHIR-VersionNumber', 'StructureDefinition/extension-ig-dependency', 'StructureDefinition/CCDA-on-FHIR-Authorization', 'StructureDefinition/hrex-coverage', 'StructureDefinition/t300', 'StructureDefinition/t353', 'StructureDefinition/PhCP-CareCoordination', 'StructureDefinition/PhCP-Composition', 'StructureDefinition/PhCP-Coverage', 'StructureDefinition/PhCP-MedicationDispense', 'StructureDefinition/M64wX6Bf', 'StructureDefinition/aZuuJGqH', 'StructureDefinition/davinci-pas-coverage', 'StructureDefinition/device-fish-probe', 'StructureDefinition/device-micro-plat', 'StructureDefinition/diagnosticreport', 'StructureDefinition/dr-recommendedAction', 'StructureDefinition/dr-relatedArtifact', 'StructureDefinition/dr-supportingInfo', 'StructureDefinition/medicationstatement', 'StructureDefinition/obs-base', 'StructureDefinition/obs-comp-gen-finding', 'StructureDefinition/obs-complex-variant', 'StructureDefinition/obs-copy-num-chg', 'StructureDefinition/obs-cytogenetic-nomenclature', 'StructureDefinition/obs-deletion-dup', 'StructureDefinition/obs-described-variant', 'StructureDefinition/obs-efficacy', 'StructureDefinition/obs-focus', 'StructureDefinition/obs-gen-panel', 'StructureDefinition/obs-genotype', 'StructureDefinition/obs-haplotype', 'StructureDefinition/obs-high-risk', 'StructureDefinition/obs-impact', 'StructureDefinition/obs-inh-dis-path', 'StructureDefinition/obs-med-impact', 'StructureDefinition/obs-metabolism', 'StructureDefinition/obs-overall', 'StructureDefinition/obs-recommendedAction', 'StructureDefinition/obs-region-studied', 'StructureDefinition/obs-sequence-phase-reltn', 'StructureDefinition/obs-som-diagnostic', 'StructureDefinition/obs-som-impact', 'StructureDefinition/obs-som-predictive', 'StructureDefinition/obs-som-prognostic', 'StructureDefinition/obs-transporter', 'StructureDefinition/servicerequest', 'StructureDefinition/specimen', 'StructureDefinition/task-med-chg', 'StructureDefinition/task-rec-followup', 'StructureDefinition/hrex-provenance', 'StructureDefinition/hrex-practitioner', 'StructureDefinition/hrex-practitionerrole', 'StructureDefinition/hrex-organization', 'StructureDefinition/cdex-document-bundle', 'StructureDefinition/cdex-communication', 'StructureDefinition/cdex-communicationrequest', 'StructureDefinition/PhCP-ServiceRequest', 'StructureDefinition/PhCP-Instruction-Procedure', 'StructureDefinition/PhCP-Encounter', 'StructureDefinition/PhCP-Organization', 'StructureDefinition/PhCP-Intervention-Procedure', 'StructureDefinition/ah-documentreference', 'StructureDefinition/ah-primary-contact', 'StructureDefinition/PhCP-Medication-Therapy-Condition', 'StructureDefinition/careplan-eltss', 'StructureDefinition/claim-eltss', 'StructureDefinition/condition-eltss', 'StructureDefinition/contract-eltss', 'StructureDefinition/eltss-directedBy', 'StructureDefinition/eltss-dueTo', 'StructureDefinition/eLTSSPersonModel', 'StructureDefinition/eLTSSServiceModel', 'StructureDefinition/eLTSSServicePlanModel', 'StructureDefinition/episodeofcare-eltss', 'StructureDefinition/goal-eltss', 'StructureDefinition/location-eltss', 'StructureDefinition/observation-eltss', 'StructureDefinition/patient-eltss', 'StructureDefinition/practitioner-eltss', 'StructureDefinition/questionnaire-eltss', 'StructureDefinition/riskassessment-eltss', 'StructureDefinition/servicerequest-eltss', 'StructureDefinition/sequoia-organization', 'StructureDefinition/sequoia-endpoint', 'StructureDefinition/sequoia-endpoint-main', 'StructureDefinition/ah-related-person', 'StructureDefinition/sequoia-org-position', 'StructureDefinition/sequoia-location', 'StructureDefinition/cdex-payload-query-string', 'StructureDefinition/eicr-condition', 'StructureDefinition/eicr-encounter', 'StructureDefinition/eicr-location', 'StructureDefinition/knowledge-distribution-valueset-library', 'StructureDefinition/rr-communication', 'StructureDefinition/rr-relevant-reportable-condition-plandefinition', 'StructureDefinition/ecr-organization', 'StructureDefinition/ecr-practitionerrole', 'StructureDefinition/ecr-patient', 'StructureDefinition/eicr-composition', 'StructureDefinition/cdex-payload-clinical-note-type', 'StructureDefinition/Patient', 'StructureDefinition/Afiliado-ig', 'StructureDefinition/NQF19eKC', 'StructureDefinition/hrex-medicationdispense', 'StructureDefinition/cdex-task', 'StructureDefinition/myExample-Patient', 'StructureDefinition/xIMtznss', 'StructureDefinition/cdex-searchset-bundle', 'StructureDefinition/DexCoverage', 'StructureDefinition/pdex-medicationdispense', 'StructureDefinition/carin-coverage', 'StructureDefinition/eicr-servicerequest', 'StructureDefinition/usdrugformulary-MailOrder-extension', 'StructureDefinition/usdrugformulary-EmailPlanContact-extension', 'StructureDefinition/usdrugformulary-CopayOption-extension', 'StructureDefinition/usdrugformulary-CoveragePlan', 'StructureDefinition/usdrugformulary-FormularyURL-extension', 'StructureDefinition/usdrugformulary-QuantityLimit-extension', 'StructureDefinition/usdrugformulary-PriorAuthorization-extension', 'StructureDefinition/usdrugformulary-Network-extension', 'StructureDefinition/usdrugformulary-StepTherapyLimit-extension', 'StructureDefinition/usdrugformulary-DrugTierID-extension', 'StructureDefinition/usdrugformulary-DrugTierDefinition-extension', 'StructureDefinition/usdrugformulary-CostSharing-extension', 'StructureDefinition/usdrugformulary-PharmacyType-extension', 'StructureDefinition/usdrugformulary-PlanIDType-extension', 'StructureDefinition/usdrugformulary-MarketingURL-extension', 'StructureDefinition/usdrugformulary-CopayAmount-extension', 'StructureDefinition/usdrugformulary-CoInsuranceRate-extension', 'StructureDefinition/usdrugformulary-FormularyDrugOption2', 'StructureDefinition/usdrugformulary-CoinsuranceOption-extension', 'StructureDefinition/usdrugformulary-FormularyDrug', 'StructureDefinition/travel-history-observation', 'StructureDefinition/eicr-occupation-history-observation', 'StructureDefinition/pregnancy-status-observation', 'StructureDefinition/rr-eicr-processing-status-reason-observation', 'StructureDefinition/rr-responsible-agency-organization', 'StructureDefinition/rr-rules-authoring-agency-organization', 'StructureDefinition/rr-routing-entity-organization', 'StructureDefinition/rr-eicr-processing-status-observation', 'StructureDefinition/carin-practitionerrole', 'StructureDefinition/ecr-messageheader', 'StructureDefinition/ecr-task', 'StructureDefinition/eicr-document-bundle', 'StructureDefinition/ecr-message-bundle', 'StructureDefinition/rr-determination-of-reportability-rule-extension', 'StructureDefinition/rr-determination-of-reportability-reason-extension', 'StructureDefinition/rr-location-relevance-extension', 'StructureDefinition/rr-manually-initiated-eicr-extension', 'StructureDefinition/rr-eicr-receipt-time-extension', 'StructureDefinition/rr-eicr-processing-status-extension', 'StructureDefinition/rr-external-resource-type-extension', 'StructureDefinition/rr-priority-extension', 'StructureDefinition/rr-determination-of-reportability-extension', 'StructureDefinition/travel-history-address-extension', 'StructureDefinition/eicr-manually-initiated-reason-extension', 'StructureDefinition/eicr-trigger-code-flag-extension', 'StructureDefinition/carin-bb-Coverage', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit-Oral', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit-Pharmacy', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit-Vision', 'StructureDefinition/cdex-transaction-bundle', 'StructureDefinition/1.3.6.1.4.1.19376.1.5.3.1.3.1', 'StructureDefinition/2.16.840.1.113883.10.20.22.4.140', 'StructureDefinition/2.16.840.1.113883.10.20.22.4.19', 'StructureDefinition/ersd-plandefinition', 'StructureDefinition/hai-population-summary-questionnaire-response', 'StructureDefinition/hai-population-summary-questionnaire', 'StructureDefinition/us-core-practitioner', 'StructureDefinition/us-core-organization', 'StructureDefinition/us-core-location', 'StructureDefinition/us-core-insuranceplan', 'StructureDefinition/us-core-network', 'StructureDefinition/us-core-organizationaffiliation', 'StructureDefinition/us-core-practitionerrole', 'StructureDefinition/us-core-healthcareservice', 'StructureDefinition/pdexplanpractitioner', 'StructureDefinition/PdexPlanPractitionerRole', 'StructureDefinition/pdexplanorganization', 'StructureDefinition/pdexplanlocation', 'StructureDefinition/pdexplannetwork', 'StructureDefinition/pdexplaninsuranceplan', 'StructureDefinition/pdexplanhealthcareservice', 'StructureDefinition/pdexplanorganizationaffiliation', 'StructureDefinition/maxmd-cdex-communication', 'StructureDefinition/pdexplanaccessibility', 'StructureDefinition/maxmd-payload-clinical-note-type', 'StructureDefinition/MaxMDProfileID1563206972', 'StructureDefinition/MaxMDConditionResource1563207797', 'StructureDefinition/pdexplan-contactpoint-viaintermediary', 'StructureDefinition/pdexplan-contactpointavailabletime', 'StructureDefinition/maxmd-extension-1563306419', 'StructureDefinition/D9dC9JEh', 'StructureDefinition/ChealthLHREOB', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit-Inpatient-Facility', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit-Outpatient-Facility', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit-Test', 'StructureDefinition/CARINBBPatient', 'StructureDefinition/CARIN-BB-ExplanationOfBenefit-Professional-NonClinician', 'StructureDefinition/maxmd-cdex-communicationrequest', 'StructureDefinition/maxmd-cdex-document-bundle', 'StructureDefinition/maxmd-cdex-searchset-bundle', 'StructureDefinition/maxmd-cdex-task', 'StructureDefinition/maxmd-cdex-transaction-bundle', 'StructureDefinition/maxmd-cdex-payload-clinical-note-type', 'StructureDefinition/maxmd-cdex-payload-query-string', 'Task/ecr-task-ehr-requested-eicr', 'Task/task-ecr-ehr-requested-eicr', 'ValueSet/genetic-coordinate-system', 'ValueSet/hgnc', 'ValueSet/hgvs', 'ValueSet/2.16.840.1.113762.1.4.1096.202', 'ValueSet/2.16.840.1.113762.1.4.1096.214', 'ValueSet/2.16.840.1.113762.1.4.1096.181', 'ValueSet/2.16.840.1.113762.1.4.1096.208', 'ValueSet/2.16.840.1.113762.1.4.1096.207', 'ValueSet/2.16.840.1.113762.1.4.1096.198', 'ValueSet/2.16.840.1.113762.1.4.1096.213', 'ValueSet/2.16.840.1.113762.1.4.1096.200', 'ValueSet/care-plan-document-type', 'ValueSet/2.16.840.1.113883.1.11.20.2.3', 'ValueSet/2.16.840.1.113883.1.11.20.2.4', 'ValueSet/2.16.840.1.113883.1.11.20.22', 'ValueSet/2.16.840.1.113883.11.20.1.1', 'ValueSet/2.16.840.1.113883.11.20.4.1', 'ValueSet/2.16.840.1.113883.11.20.6.1', 'ValueSet/2.16.840.1.113883.11.20.8.1', 'ValueSet/2.16.840.1.113883.11.20.9.31', 'ValueSet/2.16.840.1.113883.11.20.9.59', 'ValueSet/1.3.6.1.4.1.12009.10.2.5', 'ValueSet/2.16.840.1.113762.1.4.1096.87', 'ValueSet/2.16.840.1.113762.1.4.1096.120', 'ValueSet/2.16.840.1.113762.1.4.1096.130', 'ValueSet/2.16.840.1.113762.1.4.1096.137', 'ValueSet/2.16.840.1.113762.1.4.1096.151', 'ValueSet/2.16.840.1.113762.1.4.1096.165', 'ValueSet/2.16.840.1.113762.1.4.1096.53', 'ValueSet/2.16.840.1.113762.1.4.1099.10', 'ValueSet/pregnancy-status', 'ValueSet/2.16.840.1.113762.1.4.1186.3', 'ValueSet/usdrugformulary-DrugTierVS', 'ValueSet/usdrugformulary-CopayOptionVS', 'ValueSet/usdrugformulary-PharmacyTypeVS', 'ValueSet/usdrugformulary-CoinsuranceOptionVS', 'ValueSet/valueset-location-relevance-ecr', 'ValueSet/valueset-oes', 'ValueSet/valueset-determination-of-reportability-ecr', 'ValueSet/valueset-eicr-processing-status-reason-detail-type-ecr', 'ValueSet/valueset-eicr-processing-status-ecr', 'ValueSet/valueset-lotc', 'ValueSet/valueset-eicr-processing-status-reason-ecr', 'ValueSet/valueset-dxtc', 'ValueSet/valueset-lrtc', 'ValueSet/valueset-geographical-location-history', 'ValueSet/valueset-reportability-priority-ecr', 'ValueSet/valueset-external-resource-type-ecr', 'ValueSet/valueset-ostc', 'ValueSet/cdex-clinical-note-type', 'ValueSet/2.16.840.1.113762.1.4.1010.1', 'ValueSet/2.16.840.1.113762.1.4.1010.2', 'ValueSet/2.16.840.1.113762.1.4.1010.4', 'ValueSet/2.16.840.1.113762.1.4.1010.6', 'ValueSet/2.16.840.1.113762.1.4.1010.8', 'ValueSet/2.16.840.1.113762.1.4.1021.30', 'ValueSet/2.16.840.1.113762.1.4.1099.11', 'ValueSet/2.16.840.1.113762.1.4.1099.12', 'ValueSet/2.16.840.1.113762.1.4.1099.24', 'ValueSet/2.16.840.1.113883.1.11.1', 'ValueSet/2.16.840.1.113883.1.11.10267', 'ValueSet/2.16.840.1.113883.1.11.10416', 'ValueSet/2.16.840.1.113883.1.11.10637', 'ValueSet/2.16.840.1.113883.1.11.11526', 'ValueSet/2.16.840.1.113883.1.11.11610', 'ValueSet/2.16.840.1.113883.1.11.12199', 'ValueSet/2.16.840.1.113883.1.11.12212', 'ValueSet/2.16.840.1.113883.1.11.12249', 'ValueSet/2.16.840.1.113883.1.11.12839', 'ValueSet/2.16.840.1.113883.1.11.14914', 'ValueSet/2.16.840.1.113883.1.11.15913', 'ValueSet/2.16.840.1.113883.1.11.15933', 'ValueSet/2.16.840.1.113883.1.11.16866', 'ValueSet/2.16.840.1.113883.1.11.16926', 'ValueSet/2.16.840.1.113883.1.11.18877', 'ValueSet/2.16.840.1.113883.1.11.19185', 'ValueSet/2.16.840.1.113883.1.11.19579', 'ValueSet/2.16.840.1.113883.1.11.19601', 'ValueSet/2.16.840.1.113883.1.11.19717', 'ValueSet/2.16.840.1.113883.1.11.20.12', 'ValueSet/2.16.840.1.113883.1.11.20.2.5', 'ValueSet/2.16.840.1.113883.1.11.20.2.6', 'ValueSet/2.16.840.1.113883.1.11.20.2.7', 'ValueSet/2.16.840.1.113883.1.11.20.2.9', 'ValueSet/2.16.840.1.113883.1.11.20.2', 'ValueSet/2.16.840.1.113883.1.11.20549', 'ValueSet/2.16.840.1.113883.1.11.78', 'ValueSet/2.16.840.1.113883.11.20.12.1', 'ValueSet/2.16.840.1.113883.11.20.9.18', 'ValueSet/2.16.840.1.113883.11.20.9.19', 'ValueSet/2.16.840.1.113883.11.20.9.20', 'ValueSet/2.16.840.1.113883.11.20.9.21', 'ValueSet/2.16.840.1.113883.11.20.9.22', 'ValueSet/2.16.840.1.113883.11.20.9.23', 'ValueSet/2.16.840.1.113883.11.20.9.24', 'ValueSet/2.16.840.1.113883.11.20.9.25', 'ValueSet/2.16.840.1.113883.11.20.9.26', 'ValueSet/2.16.840.1.113883.11.20.9.29', 'ValueSet/2.16.840.1.113883.11.20.9.33', 'ValueSet/2.16.840.1.113883.11.20.9.35', 'ValueSet/2.16.840.1.113883.11.20.9.36', 'ValueSet/2.16.840.1.113883.11.20.9.37', 'ValueSet/2.16.840.1.113883.11.20.9.38', 'ValueSet/2.16.840.1.113883.11.20.9.39', 'ValueSet/2.16.840.1.113883.11.20.9.41', 'ValueSet/2.16.840.1.113883.11.20.9.44', 'ValueSet/2.16.840.1.113883.11.20.9.47', 'ValueSet/2.16.840.1.113883.11.20.9.49', 'ValueSet/2.16.840.1.113883.11.20.9.50', 'ValueSet/2.16.840.1.113883.11.20.9.51', 'ValueSet/2.16.840.1.113883.11.20.9.52', 'ValueSet/2.16.840.1.113883.11.20.9.54', 'ValueSet/2.16.840.1.113883.11.20.9.55', 'ValueSet/2.16.840.1.113883.11.20.9.58', 'ValueSet/2.16.840.1.113883.11.20.9.60', 'ValueSet/2.16.840.1.113883.11.20.9.61', 'ValueSet/2.16.840.1.113883.11.20.9.65', 'ValueSet/2.16.840.1.113883.11.20.9.66', 'ValueSet/2.16.840.1.113883.3.2074.1.1.3', 'ValueSet/2.16.840.1.113883.3.88.12.3221.6.2', 'ValueSet/2.16.840.1.113883.3.88.12.3221.6.8', 'ValueSet/2.16.840.1.113883.3.88.12.3221.7.2', 'ValueSet/2.16.840.1.113883.3.88.12.3221.8.7', 'ValueSet/2.16.840.1.113883.3.88.12.3221.8.9', 'ValueSet/2.16.840.1.113883.3.88.12.80.32', 'ValueSet/2.16.840.1.113883.3.88.12.80.60', 'ValueSet/2.16.840.1.113883.3.88.12.80.62', 'ValueSet/2.16.840.1.113883.3.88.12.80.64', 'ValueSet/2.16.840.1.113883.3.88.12.80.68', 'ValueSet/2.16.840.1.114222.4.11.1066', 'ValueSet/2.16.840.1.114222.4.11.3591', 'ValueSet/2.16.840.1.114222.4.11.837', 'ValueSet/2.16.840.1.114222.4.11.877', 'ValueSet/2.16.840.1.113883.10.20.5.1.5.9.3', 'ValueSet/2.16.840.1.113883.13.19', 'ValueSet/2.16.840.1.114222.4.11.3194', 'ValueSet/2.16.840.1.114222.4.11.3249', 'ValueSet/MaxMD-Condition-ClinicalStatus-1563208429', 'ValueSet/CARIN-BB-Claim-Type', 'ValueSet/CARIN-BB-Related-Claim-Relationship', 'ValueSet/CARIN-BB-Claim-CareTeam-Role', 'ValueSet/CARIN-BB-Claim-Information-Category', 'ValueSet/CARIN-BB-DiagnosisType', 'ValueSet/CARIN-BB-Revenue-Center', 'ValueSet/CARIN-BB-Adjudication-Amount-Category', 'ValueSet/CARIN-BB-Adjudication-Benefit-Payment-Status-Category', 'ValueSet/CARIN-BB-Adjudication-Denial-Reason', 'ValueSet/CARIN-BB-Network-Contracting-Status', 'ValueSet/CARIN-BB-TypeOfService', 'ValueSet/CARIN-BB-TOB-TypeOfFacility', 'ValueSet/CARIN-BB-TOB-BillClassification', 'ValueSet/CARIN-BB-TOB-Frequency', 'ValueSet/CARIN-BB-AdmitSource', 'ValueSet/CARIN-BB-AdmitType', 'ValueSet/CARIN-BB-Discharge-Status', 'ValueSet/CARIN-BB-MS-DRG', 'ValueSet/CARIN-BB-Adjudication-Category', 'ValueSet/CARIN-BB-CPT-HCPCS-ProcedureCodes', 'ValueSet/CARIN-BB-PlaceOfService', 'ValueSet/CARIN-BB-HCPCS-ModifierCodes', 'ValueSet/CARIN-BB-SNOMEDCT-ProcedureCodes', 'ValueSet/maxmd-cdex-clinical-note-type', 'ValueSet/maxmd-referral-document-type', 'ValueSet/maxmd-consult-document-type', 'ValueSet/maxmd-discharge-summary-document-type-code', 'ValueSet/maxmd-hp-document-type', 'ValueSet/maxmd-progress-note-document-type-code', 'ValueSet/maxmd-loinc-imaging-document-codes', 'ValueSet/maxmd-care-plan-document-type', 'ValueSet/maxmd-transfer-document-type', 'ValueSet/maxmd-procedure-note-document-type-codes', 'ValueSet/maxmd-surgical-operation-note-document-type-code'];
                        _i = 0, list_1 = list;
                        _a.label = 1;
                    case 1:
                        if (!(_i < list_1.length)) return [3, 14];
                        ref = list_1[_i];
                        refSplit = ref.split('/');
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, , 13]);
                        console.log("Checking target server for " + ref);
                        return [4, this.getResource(this.targetFhirBase, refSplit[0], refSplit[1])];
                    case 3:
                        _a.sent();
                        console.log("Found " + ref + " on target server. Moving on...");
                        return [3, 13];
                    case 4:
                        ex_1 = _a.sent();
                        console.log(ref + " not found on target server, attempting to get and create");
                        resource = void 0;
                        _a.label = 5;
                    case 5:
                        _a.trys.push([5, 7, , 8]);
                        return [4, this.getResource(this.sourceFhirBase, refSplit[0], refSplit[1])];
                    case 6:
                        resource = _a.sent();
                        return [3, 8];
                    case 7:
                        ex_2 = _a.sent();
                        console.log("Could not get " + ref + " from source server");
                        return [3, 8];
                    case 8:
                        if (!resource) return [3, 12];
                        _a.label = 9;
                    case 9:
                        _a.trys.push([9, 11, , 12]);
                        return [4, this.updateResource(this.targetFhirBase, resource)];
                    case 10:
                        _a.sent();
                        return [3, 12];
                    case 11:
                        ex_3 = _a.sent();
                        console.error("Could not update " + ref + " on target server");
                        return [3, 12];
                    case 12: return [3, 13];
                    case 13:
                        _i++;
                        return [3, 1];
                    case 14: return [2];
                }
            });
        });
    };
    return Transfer;
}());
exports.Transfer = Transfer;
//# sourceMappingURL=transfer.js.map